language: erlang
otp_release:
  - 20.3.8
  - 20.3.8.22

matrix:
  include:
    - dist: trusty
      env: DIST=trusty
    - dist: xenial
      env: DIST=xenial

install: true
script:
  - erl -noshell -eval 'erlang:display(erlang:system_info(system_version))' -eval 'init:stop()'
  - erl -eval 'erlang:display(erlang:system_info(otp_release)), halt().'  -noshell
  - erl -eval '{ok, Version} = file:read_file(filename:join([code:root_dir(), "releases", erlang:system_info(otp_release), "OTP_VERSION"])), io:fwrite(Version), halt().' -noshell
  - erl -noshell -eval 'io:fwrite("~s\n", [erlang:system_info(otp_release)]).' -s erlang halt
  - rebar3 --version

notifications:
  email: false
