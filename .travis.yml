sudo: required
dist: trusty

language: node_js

before_install:
  - cd /usr/local/
  - find . | grep neo4j || sudo find . | grep neo4j
  - sudo rm -rf neo4j
  - sudo rm -rf neo4j-3.2.1
  - sudo rm /etc/init.d/neo4j

before_script:
  - sudo apt-get remove neo4j || true
  - sudo apt-get remove neo4j-enterprise || true
  - sudo service neo4j stop || true
  - sudo service neo4j-enterprise stop || true
  - wget -O - https://debian.neo4j.org/neotechnology.gpg.key | sudo apt-key add -
  - echo 'deb https://debian.neo4j.org/repo stable/' | sudo tee /etc/apt/sources.list.d/neo4j.list
  - sudo apt-get update
  - sudo apt-get install neo4j-enterprise=3.2.3
  - sleep 10

install: true
script:
  - cd /usr/local/
  - find . | grep neo4j || sudo find . | grep neo4j
  - curl http://localhost:7474/db/data/
  - service neo4j status
  - service neo4j start
  - curl http://localhost:7474/db/data/
