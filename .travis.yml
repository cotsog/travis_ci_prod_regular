language: ruby

stages:
  - name: cron
    if: type = cron
  - name: commit_message
    if: commit_message =~ /\[ci integration\]/
  - name: tags
    if: tag IS present AND tag =~ /^v[\d]+\.[\d]+\.[\d]+/
  - name: everything
    if: type = cron OR commit_message =~ /\[ci integration\]/ OR (tag IS present AND tag =~ /^v[\d]+\.[\d]+\.[\d]+/)
    
jobs:
  include:
    - stage: cron
      script: echo "CRON"
    - stage: commit_message
      script: echo "COMMIT_MESSAGE"
    - stage: tags
      script: echo "TAGS"
    - stage: everything
      script: echo "EVERYTHING"

install: true
script: true
