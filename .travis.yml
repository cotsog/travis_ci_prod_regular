sudo: required
language: python
python:
- '2.7'
addons:
  postgresql: "9.3"
before_install:
- sudo apt-get update -qq
- sudo apt-get install software-properties-common default-jre
- sudo apt-get update -qq
- sudo apt-get install -y python-software-properties python g++ make
- sudo apt-get remove libmemcached* -y
- sudo apt-get autoremove -y
- sudo add-apt-repository -y ppa:scratchteam/infrastructure
- sudo apt-get update -qq
- sudo apt-get install libmemcached-dev

install: true
script: true

notifications:
Â  email: false

services:
- memcached
- redis-server

before_script:
- 'sh -e /etc/init.d/xvfb start'
- mysql -e 'create database scratchr2_test;'
- mysql -e 'SET GLOBAL wait_timeout=28800;'
- psql -c 'create database scratchr2_research_test;' -U postgres
env:
  global:
  # See https://github.com/travis-ci/travis-ci/issues/7940
  - BOTO_CONFIG=/dev/null
  - DJANGO=1.8.16
  - DJANGO_SETTINGS_MODULE=scratchr2.settings.test
  - TEST_SUITE=!ui
