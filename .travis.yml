env:
  global:
    - KONG_PACKAGE_NAME=kong-private KONG_VERSION=`date +%Y-%m-%d`
  matrix:
    - KONG_TEST_DATABASE=postgres TEST_SUITE=integration
    - KONG_TEST_DATABASE=cassandra CASSANDRA=2.2 TEST_SUITE=integration
    - KONG_TEST_DATABASE=cassandra CASSANDRA=3.9 TEST_SUITE=integration
    - KONG_TEST_DATABASE=postgres TEST_SUITE=plugins
    - KONG_TEST_DATABASE=cassandra CASSANDRA=2.2 TEST_SUITE=plugins
    - KONG_TEST_DATABASE=cassandra CASSANDRA=3.9 TEST_SUITE=plugins

jobs:
  include:
    - stage: deploy daily build
      install: skip
      script: make release
      env: RESTY_IMAGE_BASE=ubuntu RESTY_IMAGE_TAG=trusty
    - script: make release
      env: RESTY_IMAGE_BASE=ubuntu RESTY_IMAGE_TAG=xenial
    - script: make release
      env: RESTY_IMAGE_BASE=centos RESTY_IMAGE_TAG=6
    - script: make release
      env: RESTY_IMAGE_BASE=centos RESTY_IMAGE_TAG=7    
install: true
script: true
